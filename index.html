<script>
    // Service Workerを確実に登録・更新
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/sw.js', { scope: '/' }).then(reg => {
            reg.update(); // 常に最新の「検問」を適用
        });
    }
    // ...あとのボタン処理などはそのまま...
</script>
