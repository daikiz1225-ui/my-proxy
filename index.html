<div class="nav">
    <button class="btn" onclick="sendToIframe('back')">←</button>
    <button class="btn" onclick="sendToIframe('forward')">→</button>
    <button class="btn" onclick="sendToIframe('reload')">↻</button>
    <input type="text" id="u" placeholder="game8.jp">
    <button id="go">Launch</button>
</div>

<script>
    const f = document.getElementById('f');
    function sendToIframe(command) {
        // iframeの中に命令を飛ばす
        f.contentWindow.postMessage(command, '*');
    }

    document.getElementById('go').onclick = () => {
        let v = document.getElementById('u').value.trim();
        if(!v.startsWith('http')) v = 'https://' + v;
        const b64 = btoa(unescape(encodeURIComponent(v))).replace(/\//g, '_').replace(/\+/g, '-');
        f.src = "/api/proxy?url=" + b64;
    };
</script>
